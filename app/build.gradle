// NOTE: ‡πÇ‡∏õ‡∏£‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô C:\SmartV3\android\app\build.gradle
// This file is a standard, robust build file for a React Native application.

// 1. ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏¥‡∏ô (Plugins)
apply plugin: "com.android.application"
apply plugin: "org.jetbrains.kotlin.android"

// *** CONFIGURATION FOR REACT NATIVE AND EXPO (if applicable) ***
// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ SDK ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
def compileSdkVersion = 34
def targetSdkVersion = 34
def minSdkVersion = 24 // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏õ‡πá‡∏ô 24 ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ

// 2. Android Configuration
android {
    // üö© ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Namespace (‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏)
    namespace "com.smartv3"

    compileSdkVersion compileSdkVersion

    defaultConfig {
        applicationId "com.smartv3"
        minSdkVersion minSdkVersion
        targetSdkVersion targetSdkVersion
        versionCode 1
        versionName "1.0"
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° multiDexEnabled ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ dependencies ‡∏°‡∏≤‡∏Å
        multiDexEnabled true
    }

    signingConfigs {
        debug {
            storeFile file('debug.keystore')
            storePassword 'android'
            keyAlias 'androiddebugkey'
            keyPassword 'android'
        }
    }

    buildTypes {
        debug {
            signingConfig signingConfigs.debug
        }
        release {
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Release build
            minifyEnabled false
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
            signingConfig signingConfigs.debug // ‡πÉ‡∏ä‡πâ debug config ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ
        }
    }

    // üö© ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ Java 11
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }
}

// *** CRITICAL STEP: Apply React Native script (Always required) ***
// ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å React Native Core ‡∏°‡∏≤‡πÉ‡∏ä‡πâ
def reactNativeScript = file("../node_modules/react-native/react.gradle")
if (reactNativeScript.exists()) {
    apply from: reactNativeScript
} else {
    // Fallback log message
    println "WARNING: React Native's react.gradle not found. Check node_modules setup."
}

// *** CRITICAL FIX FOR react-native-abi PATH ISSUE ***
// ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏°‡∏î‡∏π‡∏• :react-native-abi
if (project.hasProperty('react-native-abi')) {
    // üö© ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏´‡∏≤ 'react.gradle' ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏°‡πà‡∏Ç‡∏≠‡∏á :react-native-abi (‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠ ReactAndroid)
    apply from: new File(project(':react-native-abi').projectDir.getParentFile(), 'react.gradle')
}


// 3. Dependencies
dependencies {
    implementation fileTree(dir: "libs", include: ["*.jar"])

    // Dependencies ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
    implementation "androidx.core:core-ktx:1.10.1"
    implementation "androidx.appcompat:appcompat:1.6.1"
    implementation "androidx.multidex:multidex:2.0.1" // ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö multiDexEnabled

    // Dependencies ‡∏Ç‡∏≠‡∏á‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏°‡∏≤ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏°‡∏µ)
    implementation project(':expo-modules-core')
    implementation project(':react-native-abi') // ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
    
    // ‡∏´‡∏≤‡∏Å‡∏°‡∏µ dependencies ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
}
